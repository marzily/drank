function extractCoordinates(){navigator.geolocation?navigator.geolocation.getCurrentPosition(coords):alert("Geolocation is not supported by this browser.")}function coords(o){var t={latitude:o.coords.latitude,longitude:o.coords.longitude};sendCoords(t)}function sendCoords(o){$.ajax({url:"/coords",type:"GET",data:o,success:function(){enableLogin(),console.log(o)},error:function(o){console.error(o)}})}function enableLogin(){$(".button_to").attr("action","/auth/twitter"),$(".button_to").attr("method","post")}function waitForGeolocation(){$(".button_to").attr("action","#"),$(".button_to").removeAttr("method")}function geolocationPopUp(){$(".button_to").click(function(){void 0===$(".button_to").attr("method")&&alert("Please wait for geolocation to load.")})}$(document).ready(function(){extractCoordinates(),waitForGeolocation(),geolocationPopUp()});