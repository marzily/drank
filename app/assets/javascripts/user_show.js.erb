// drop down menu
function dropdownItemSelect() {
  $('.dropdown-menu').children().children().on("click", updateRecommended);
}

function updateRecommended() {
  $('.recommended').text( $(this).text() );
}

// on click
//  ==> drop image
// ==> get new image url
// ==> append new image

// map
function updateMap(position) {
  var coordinates = { latitude: position.coords.latitude,
                      longitude: position.coords.longitude };
  $.ajax({  url: "/map_coords",
            type: "POST",
            data: coordinates,
            success: function() {
                console.log(coordinates);
            },
            error: function(message){
                console.error(message);
            }
        });
}

function coordinates() {
  return { lat: $('#coordinates').data('lat'),
           lng: $('#coordinates').data('lng') };
}

var map;
function initMap() {
  map = new google.maps.Map(document.getElementById('map'), {
    center: coordinates(),
    zoom: 14
  });
}

function appendMapURL() {
  var mapURL = "<script async defer src='https://maps.googleapis.com/maps/api/js?key=<%= ENV['google_key'] %>&callback=initMap'></script>"
  $( "html" ).append( mapURL );
}


$(document).ready(function() {
  dropdownItemSelect();
  appendMapURL();
});
