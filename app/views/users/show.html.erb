<% content_for :head do %>
  <%= javascript_include_tag 'show', 'data-turbolinks-track' => true %>
<% end %>

<%= render partial: "navbar" %>

<%= content_tag :div, id: "coordinates", data: {lat: session[:location]['latitude'], lng: session[:location]['longitude']} do %>
<% end %>

<div id="weather">
  <% if session[:location]['city'].nil? || session[:location]['state'].nil? %>
    <p>Unable to access your current location. Please try the following:</p>
    <ol>
      <li>Ensure that geolocation is enabled in your broswer.</li>
      <li>Refresh your browser.</li>
   </ol>
  <% else %>
    <h1><%= session[:location]['city'] %>, <%= session[:location]['state'] %></h1>
    <h1><%= session[:temp_f] %></h1>
  <% end %>
</div>

<h4>This weather is perfect for...
  <div class="btn-group">
      <button type="button" class="btn btn-default" id="recommended"><%= @recommended %></button>
      <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <span class="caret"></span>
        <span class="sr-only">Toggle Dropdown</span>
      </button>
      <ul class="dropdown-menu">
        <% @drinks.each do |drink| %>
          <li><%= link_to drink.drink_type, "#", class: drink.id %></li>
        <% end %>
      </ul>
  </div>
!</h4>

<div id="map"></div>

<script async defer src='https://maps.googleapis.com/maps/api/js?key=<%= ENV['google_browser_key'] %>&callback=initMap'></script>
